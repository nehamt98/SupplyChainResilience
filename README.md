# SupplyChainResilience
An interactive dashboard tool for visualizing and assessing supply chain vulnerabilities in critical goods for any country and year.
Built using Dash (Plotly) and powered by UN Comtrade trade flow data.

## Features
- Select any country, year, and commodity
- Compute supply chain metrics including:
    - Herfindahl-Hirschman Index (HHI)
    - Diversity Score
    - Import Dependency Index (IDI)
    - SCRI (Composite metric)
- Visual policy recommendations based on SCRI score
- Compare SCRI scores across multiple commodities
- Support for plug-and-play with any CSV of critical goods

## Metrics
The SCRI (Supply Chain Resilience Index) combines three metrics:
- HHI (Herfindahl-Hirschman Index): Measures concentration of import partners
- Diversity Score: Scales from 0 to 1 based on how many partners a country imports from
- Import Dependency Index (IDI): Measures reliance on imports versus exports

SCRI = HHI × (1 - Diversity Score) × IDI

Higher SCRI = higher vulnerability.

## Setup Instructions
1. Clone the repository
```
git clone https://github.com/nehamt98/SupplyChainResilience.git
cd SupplyChainResilience
```
2. Install dependencies
```
pip install -r requirements.txt
```
## Code overview
This section explains the purpose of each file and how different components of the project interact.

**main.py**

The main Dash app. This file defines:
- The layout of the dashboard (dropdowns, charts, text)
- Callback functions that respond to user input
- Calls to utility functions to fetch and process data
- Visualization of metrics and generation of policy recommendations

Run this file to launch the dashboard locally.

**utils/main_utils.py**

Contains all reusable utility functions used by the app, including:
- fetch_comtrade_data() – Sends requests to the UN Comtrade API with retry logic
- is_valid_partner() – Filters out non-country or aggregate trade partners
- fetch_countries() – Loads preprocessed country dropdown data
- fetch_commodities() – Loads the list of HS codes and commodity names
- get_trade_partners() – Retrieves trade values by partner for a given commodity
- calculate_scri() – Computes HHI, IDI, Diversity Score, and the composite SCRI

These functions are imported into main.py.

**utils/prepare_data.py**

This script is used to prepare the data before running the app.

**data/**

Contains preprocessed and raw data files used by the app:
- semiconductors.csv - Raw HS code dataset from [Criticial Supply Chains](https://www.trade.gov/data-visualization/draft-list-critical-supply-chains)
- semiconductors_labels.csv – Cleaned HS codes with descriptions (Generated by prepare_data.py)
- countries.csv – List of available countries with their UN Comtrade codes (Generated by prepare_data.py)

## Preprocessing Your Own Data
To analyze a new set of critical goods:
1. Replace or add your own CSV in the data/ folder.
The CSV should have a column named: 8- or 10-Digit HS Code. This data will be available in [Criticial Supply Chains](https://www.trade.gov/data-visualization/draft-list-critical-supply-chains)
2. In prepare_data.py, uncomment the line:
prepare_commodities(“your_dataset_name”)
This creates a your_dataset_name_labels.csv file with HS code descriptions.
3. (Optional) Regenerate countries list by uncommenting:
load_countries()
4. Create a .env file in the main path and add your API_KEY
```
API_KEY = "<Your API KEY>"
```
5. Run the script once:
python utils/prepare_data.py
6. In main_utils.py, change the file name in fetch_commodities():
pd.read_csv(“data/your_dataset_name_labels.csv”)

## Running the app
```
python main.py
```
The app runs locally at: http://127.0.0.1:8055/

## How to Use
1. Enter your UN Comtrade API Key
2.	Select a country, year, and commodity
3.	View:
    - Metrics
	- Import distribution pie chart
	- Risk level with policy suggestions
4.	Scroll down to select multiple commodities for comparative SCRI scores

## Policy Recommendations Logic
Based on the SCRI score:
- High Risk (SCRI > 0.5):
	- Strong reliance on few suppliers
	- Suggests diversifying or reducing import dependency
- Medium Risk (0.2 < SCRI ≤ 0.5):
	- Moderately concentrated supply
	- Recommend supplier monitoring and bilateral deals
- Low Risk (SCRI ≤ 0.2):
	- Resilient and well-diversified
	- Continue with current policies and monitor

## Notes
- The app uses in-memory caching for trade data to limit API calls.
- Dropdowns are dynamically generated from preloaded CSVs.
- Detailed explanation of the metrics used - [Vulnerability_Calculation.md](docs/Vulnerability_Calculation.md)
- Correlation analysis of the scores - [scores_correlation.ipynb](notebooks/scores_correlation.ipynb)

